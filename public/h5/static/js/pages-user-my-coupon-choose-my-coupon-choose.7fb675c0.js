(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-my-coupon-choose-my-coupon-choose"],{"34a4":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticStyle:{width:"100%",height:"1.5rem","line-height":"1.5rem","padding-left":"1rem"}},[t._v("优惠券接收方")]),n("v-uni-view",[n("v-uni-view",{staticStyle:{width:"100%","background-color":"#FFFFFF",height:"2.5rem","line-height":"2.5rem","padding-left":"1rem"}},[t._v("接收用户："+t._s(t.userList["nickName"]))]),n("v-uni-view",{staticStyle:{width:"100%","background-color":"#FFFFFF",height:"2.5rem","line-height":"2.5rem","padding-left":"1rem","margin-top":".5rem"}},[t._v("电话号码："+t._s(t.userList["mobile"]))])],1),n("v-uni-view",{staticStyle:{height:"10rem","margin-top":"2rem"}},[n("v-uni-view",{staticStyle:{padding:"1rem 1rem 0.5rem 1rem"}},[n("v-uni-view",{staticStyle:{float:"left",width:"40%"}},[t._v("您当前未使用的优惠券·")]),n("v-uni-view",{staticStyle:{float:"left",width:"30%","text-align":"center"}},[t._v("拥有数量")]),n("v-uni-view",{staticStyle:{float:"right"}},[t._v("转让数量")]),n("v-uni-view",{staticStyle:{clear:"both"}})],1),n("v-uni-view",{staticStyle:{height:"10rem","overflow-y":"auto"}},t._l(t.couponList,(function(e,i){return n("v-uni-view",{key:i,staticStyle:{"margin-bottom":".5rem",padding:"0 1rem",height:"2.5rem","background-color":"#FFFFFF","line-height":"2.5rem"}},[n("v-uni-view",{staticStyle:{float:"left",width:"40%",height:"2.5rem","line-height":"2.5rem"}},[t._v(t._s(e.name))]),n("v-uni-view",{staticStyle:{float:"left",width:"30%","text-align":"center","line-height":"2.5rem"}},[t._v(t._s(e.user_true_sum))]),n("v-uni-view",{staticStyle:{float:"right",width:"18%","margin-top":".5rem"}},[n("v-uni-input",{staticStyle:{border:"1px solid #B7B7B7","text-align":"center"},attrs:{type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur(i)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.foc(i)},input:function(n){arguments[0]=n=t.$handleEvent(n),t.Listening(i,e.user_true_sum)}},model:{value:t.couponSum[i],callback:function(e){t.$set(t.couponSum,i,e)},expression:"couponSum[index]"}})],1)],1)})),1)],1),n("v-uni-view",{staticStyle:{clear:"both"}}),t.again?n("v-uni-view",{staticStyle:{padding:"2rem",position:"fixed",top:"13rem",margin:"auto",left:"0",right:"0",border:"1px solid #B7B7B7",width:"45%",height:"6rem","background-color":"#FFFFFF","z-index":"130"}},[n("v-uni-view",{staticStyle:{"line-height":"1.3rem"}},[t._v("本次向 "+t._s(t.userList["nickName"]))]),n("v-uni-view",{staticStyle:{"line-height":"1.3rem"}},[t._v("转让优惠券  总共 "+t._s(t.count)+" 张")]),n("v-uni-view",{staticStyle:{"line-height":"1.3rem"}},[t._v("确定要转让吗")]),n("v-uni-view",{staticStyle:{"margin-top":"1.5rem"}},[n("v-uni-button",{staticStyle:{width:"45%",margin:"0","background-color":"#FFFFFF",height:"1.5rem","line-height":"1.5rem",border:"1px solid #B7B7B7",float:"left"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel()}}},[t._v("取消")]),n("v-uni-button",{staticStyle:{width:"45%",margin:"0","background-color":"#FF0036",height:"1.5rem","line-height":"1.5rem",color:"#FFFFFF",float:"right"},attrs:{disabled:1==this.lock},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.trus()}}},[t._v("确定")])],1)],1):t._e(),n("v-uni-view",{staticStyle:{"margin-top":"3rem"}},[n("v-uni-button",{staticStyle:{"background-color":"#FF0036",color:"#FFFFFF",width:"90%","margin-left":"5%"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go()}}},[t._v("确认转让")]),n("v-uni-view",{staticStyle:{margin:".5rem 0 0 1rem",color:"#B7B7B7"}},[t._v("注：转让操作不可撤销，请谨慎操作")])],1)],1)},u=[]},7644:function(t,e,n){"use strict";n("13d5"),n("a9e3"),n("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{userinfo:!1,userList:[],unuserinfo:!1,search_user:!0,go_out:!1,top:10,position:"relative",again:!1,uid:"",couponList:[],couponSum:[],count:0,In:0,couponID:[],lock:!1}},onLoad:function(t){this.userList=getApp().globalData.userList,this.userTransfer()},methods:{userTransfer:function(t){var e=this;e._get("user.coupon/userTransfer",{user_id:uni.getStorageSync("user_id")},(function(t){e.couponList=t.data.coupon,console.log(e.couponList),console.log(e.couponList.length);for(var n=e.couponList.length;n-- >0;)e.couponID[n]=e.couponList[n]["coupon_id"],e.couponSum[n]=0}))},go:function(){var t=this;if(""==this.userList)uni.showModal({title:"提示",content:"当前页面请勿刷新",showCancel:!1,success:function(t){t.confirm&&uni.navigateTo({url:"/pages/user/my-coupon-transfer/my-coupon-transfer"})}});else{var e=this.couponSum;1==e.length?this.count=e[0]:e.reduce((function(e,n){""==n&&(n=0),t.count=parseInt(e)+parseInt(n)}));var n=0;if(1==this.couponList.length?n=this.couponList[0]["user_true_sum"]:this.couponList.reduce((function(t,e){n=parseInt(t.user_true_sum)+parseInt(e.user_true_sum)})),console.log(n),0==this.count)return uni.showModal({title:"提示",content:"转让数量不可为0",showCancel:!1}),!1;n<this.count?uni.showModal({title:"提示",content:"未知错误",showCancel:!1}):this.again=!0}},cancel:function(){this.again=!1},trus:function(){var t=this;t.lock=!0,t._post("user.coupon/turnSpecified",{couponSum:t.couponSum,couponID:t.couponID,uid:uni.getStorageSync("user_id"),id:t.userList.user_id,count:t.count},(function(t){uni.showModal({title:"提示",content:t.msg,showCancel:!1,success:function(t){t.confirm&&uni.navigateTo({url:"/pages/user/my-coupon-success/my-coupon-success"})}})}),(function(){}))},Listening:function(t,e){var n=Number(this.couponSum[t]),i=Number(e);n>i&&(this.couponSum[t]=i)},foc:function(t){""==this.couponSum[t]&&(this.couponSum[t]=0)},blur:function(t){""==this.couponSum[t]&&(this.couponSum[t]=0)}}};e.default=i},"7aef":function(t,e,n){"use strict";n.r(e);var i=n("7644"),o=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);e["default"]=o.a},"89eb":function(t,e,n){"use strict";n.r(e);var i=n("34a4"),o=n("7aef");for(var u in o)"default"!==u&&function(t){n.d(e,t,(function(){return o[t]}))}(u);var r,c=n("f0c5"),s=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"0b6529c2",null,!1,i["a"],r);e["default"]=s.exports}}]);