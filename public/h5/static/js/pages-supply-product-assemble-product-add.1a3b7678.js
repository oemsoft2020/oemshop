(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-supply-product-assemble-product-add"],{"177e":function(t,e,s){"use strict";s.r(e);var i=s("e8bd"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},cee8:function(t,e,s){"use strict";s.r(e);var i=s("dfad"),a=s("177e");for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);var u,c=s("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"653da076",null,!1,i["a"],u);e["default"]=r.exports},dfad:function(t,e,s){"use strict";var i;s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:" pb100"},[s("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)},reset:function(e){arguments[0]=e=t.$handleEvent(e),t.formReset.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"bg-white p-0-30 f30"},[s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("活动名：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.activity.title))])],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("开始时间：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.activity.start_time_text))])],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("结束时间：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.activity.end_time_text))])],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("商品名：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.form.product_name))])],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("图片：")]),s("v-uni-view",{staticClass:"upload-list d-s-c"},[s("v-uni-view",{staticClass:"item"},[s("v-uni-image",{attrs:{src:t.form.product_image,mode:"aspectFit"}})],1)],1)],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("拼团价：")]),s("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"assemble_price",type:"number",min:"0",placeholder:"请输入"},model:{value:t.form.assemble_price,callback:function(e){t.$set(t.form,"assemble_price",e)},expression:"form.assemble_price"}})],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("拼团库存：")]),s("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"assemble_stock",type:"number",min:"0",placeholder:"请输入"},model:{value:t.form.assemble_stock,callback:function(e){t.$set(t.form,"assemble_stock",e)},expression:"form.assemble_stock"}})],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("开团人数：")]),s("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"assemble_num",type:"number",min:"0",placeholder:"请输入"},model:{value:t.form.assemble_num,callback:function(e){t.$set(t.form,"assemble_num",e)},expression:"form.assemble_num"}})],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("限购数量：")]),s("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"limit_num",type:"number",min:"0",placeholder:"请输入"},model:{value:t.form.limit_num,callback:function(e){t.$set(t.form,"limit_num",e)},expression:"form.limit_num"}})],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("销售价：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.form.product_price))])],1),s("v-uni-view",{staticClass:"d-s-c border-b-e"},[s("v-uni-text",{staticClass:"key-name"},[t._v("供货价：")]),s("v-uni-view",{staticClass:"p-30-0"},[t._v(t._s(t.form.sku.product_supply_price))])],1)],1),s("v-uni-view",{staticClass:"p30"},[s("v-uni-button",{staticClass:"btn-red f30 mt30",attrs:{"form-type":"submit",type:"default"}},[t._v("确定")])],1)],1)],1)},n=[]},e8bd:function(t,e,s){"use strict";(function(t){s("acd8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{},data:function(){return{loadding:!0,form:{product_name:"",product_id:0,assemble_price:"",assemble_stock:"",assemble_num:"",limit_num:"",product_price:"",sort:100,sku:{product_id:0,product_price:0,product_sku_id:0,product_supply_price:0}},model:{},activity:{}}},onLoad:function(t){this.product_id=t.product_id?t.product_id:0,this.assemble_activity_id=t.assemble_activity_id?t.assemble_activity_id:0},onShow:function(){},mounted:function(){this.getData()},methods:{getData:function(){var e=this,s=e.product_id,i=e.assemble_activity_id;uni.showLoading({title:"加载中"}),e._get("plus.supply.assemble/detail",{product_id:s,assemble_activity_id:i},(function(s){t("log",s," at pages/supply/product/assemble/product/add.vue:133");var i=s.data.detail,a=s.data.activity;e.form.assemble_name=a.title,e.form.product_name=i.product_name,e.form.product_image=i.product_image,e.form.product_price=i.product_price;var n=i.product_sku;e.form.sku.product_sku_id=n.product_sku_id,e.form.sku.product_id=n.product_id,e.form.sku.product_supply_price=n.product_supply_price,e.activity=a,uni.hideLoading()}))},alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";uni.showToast({title:t,duration:1e3,icon:"none"})},formSubmit:function(t){var e=this,s={product_id:e.product_id,assemble_activity_id:e.assemble_activity_id};return e.form.product_id=e.product_id,s.product_data=JSON.stringify(e.form),e.form.assemble_price?e.form.assemble_price<parseFloat(e.form.sku.product_supply_price)?(e.alert("拼团价不能低于供货价"),!1):e.form.assemble_stock?e.form.assemble_num?e.form.limit_num?(uni.showLoading({title:"正在提交",mask:!0}),void e._post("plus.supply.assemble/add",s,(function(t){uni.hideLoading(),uni.showModal({title:"提示",content:t.msg,showCancel:!1,success:function(){uni.redirectTo({url:"/pages/supply/product/assemble/product?assemble_activity_id="+e.assemble_activity_id})}})}))):(e.alert("请输入限购数量"),!1):(e.alert("请输入开团人数"),!1):(e.alert("请输入拼团库存"),!1):(e.alert("请输入拼团价"),!1)}}};e.default=i}).call(this,s("0de9")["log"])}}]);