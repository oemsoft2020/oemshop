(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-my-coupon-my-coupon"],{"392a":function(t,e,i){"use strict";i("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{phoneHeight:0,scrollviewHigh:0,state_active:0,DataList:{},no_more:!1,loading:!1,data_type:"not_use",transfer_setting:!0}},mounted:function(){this.init(),this.getData()},methods:{init:function(){var t=this;uni.getSystemInfo({success:function(e){t.phoneHeight=e.windowHeight;var i=uni.createSelectorQuery().select(".top-tabbar");i.boundingClientRect((function(e){var i=t.phoneHeight-e.height;t.scrollviewHigh=i})).exec()}})},getData:function(){var t=this;uni.showLoading({title:"加载中"});var e=t.data_type;t._get("user.coupon/lists",{data_type:e},(function(e){uni.hideLoading(),t.DataList=e.data.list}))},stateFunc:function(t){var e=this;e.state_active!=t&&(0==t&&(e.data_type="not_use"),1==t&&(e.data_type="is_use"),2==t&&(e.data_type="is_expire"),e.state_active=t,e.getData())},scrolltoupperFunc:function(){console.log("滚动视图区域到顶")},scrolltolowerFunc:function(){console.log("滚动视图区域到底")},lookRule:function(t){t.rule=!0},closeRule:function(t){t.rule=!1},transfer:function(){var t=this;if(0==t.DataList.length)return uni.showModal({title:"提示",content:"您还没有优惠券",showCancel:!1}),!1;uni.navigateTo({url:"/pages/user/my-coupon-transfer/my-coupon-transfer"})},log:function(){uni.navigateTo({url:"/pages/user/my-coupon-log/my-coupon-log"})}}};e.default=n},"5f56":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"top-tabbar"},[i("v-uni-view",{class:0==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(0)}}},[t._v("未使用")]),i("v-uni-view",{class:1==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(1)}}},[t._v("已使用")]),i("v-uni-view",{class:2==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(2)}}},[t._v("已过期")])],1),i("v-uni-scroll-view",{staticClass:"scroll-Y",style:"height:"+t.scrollviewHigh+"px;",attrs:{"scroll-y":"true","lower-threshold":"50"},on:{scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltoupperFunc.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolowerFunc.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"p30 bg-white"},[t._l(t.DataList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"item-wrap mb20"},[i("v-uni-view",{class:0==e.is_expire&&0==e.is_use?"coupon-item coupon-item-"+e.color.text:"coupon-item coupon-item-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.lookRule(e)}}},[i("v-uni-view",{staticClass:"circles"},t._l(8,(function(t,e){return i("v-uni-text",{key:e})})),1),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",[t._v(t._s(e.coupon_type.text))])],1),i("v-uni-view",{staticClass:"operation d-b-c"},[i("v-uni-view",{staticClass:"flex-1 coupon-content"},[i("v-uni-view",[10==e.coupon_type.value?[i("v-uni-view",{staticClass:"price"},[i("v-uni-text",[t._v("￥")]),i("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(e.reduce_price))])],1)]:t._e(),20==e.coupon_type.value?[i("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(e.discount))]),i("v-uni-text",[t._v("折")])]:t._e()],2),i("v-uni-view",{staticClass:"f30"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"f24"},[10==e.expire_type?[t._v("有效期：剩余"+t._s(e.expire_day)+"天")]:t._e(),20==e.expire_type?[t._v("有效期："+t._s(e.start_time.text)+"至"+t._s(e.end_time.text))]:t._e()],2)],1),i("v-uni-view",{staticClass:"right-box d-c-c"},[e.state.value>0?i("v-uni-view",{staticClass:"f30",attrs:{type:"default"}},[t._v("未使用")]):i("v-uni-view",{staticClass:"f30"},[i("v-uni-text",[t._v(t._s(e.state.text))])],1)],1)],1)],1)],1)})),i("v-uni-view",{},[i("v-uni-view",{staticClass:"bottom-refresh"},[t.loading?i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"gray3"},[t._v("加载中...")])],1):t._e(),t.no_more?i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"gray3"},[t._v("~~加载完成~~")])],1):t._e()],1)],1),0!=t.DataList.length||t.loading?t._e():i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"iconfont icon-wushuju"}),i("v-uni-text",{staticClass:"cont"},[t._v("亲，暂无相关记录哦")])],1),t.transfer_setting?i("v-uni-view",{staticStyle:{width:"90%",height:"2.5rem","background-color":"#FFFFFF",position:"fixed",bottom:"0px","z-index":"100"}},[i("v-uni-button",{staticStyle:{"background-color":"#FFFFFF","font-size":"15px",float:"left",width:"40%",height:"1.5rem","line-height":"1.5rem","margin-top":".5rem"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.log()}}},[t._v("转让记录")]),i("v-uni-button",{staticStyle:{"background-color":"#FF0036","font-size":"15px",color:"#FFFFFF",float:"right",width:"40%",height:"1.5rem","line-height":"1.5rem","margin-top":".5rem"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.transfer()}}},[t._v("我要转让")])],1):t._e(),i("v-uni-view",{staticStyle:{width:"100%",height:"2.5rem","background-color":"#FFFFFF",position:"fixed",bottom:"0","z-index":"99","margin-left":"-1rem"}})],2)],1)],1)},o=[]},de88:function(t,e,i){"use strict";i.r(e);var n=i("5f56"),a=i("f165");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s,c=i("f0c5"),u=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"72354241",null,!1,n["a"],s);e["default"]=u.exports},f165:function(t,e,i){"use strict";i.r(e);var n=i("392a"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);