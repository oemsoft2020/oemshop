(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"05fb":function(t,e,n){var i=n("9a57");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("4957cae2",i,!0,{sourceMap:!1,shadowMode:!1})},"13b8":function(t,e,n){"use strict";n.r(e);var i=n("5955"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"218e":function(t,e,n){"use strict";n.r(e);var i=n("44ca"),a=n("13b8");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("28ea");var r,u=n("f0c5"),d=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"5e2d3a12",null,!1,i["a"],r);e["default"]=d.exports},"28ea":function(t,e,n){"use strict";var i=n("05fb"),a=n.n(i);a.a},"44ca":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"login-container"},[n("v-uni-view",{staticClass:"wechatapp"},[n("v-uni-view",{staticClass:"header"},[n("v-uni-open-data",{attrs:{type:"userAvatarUrl"}})],1)],1),n("v-uni-view",{staticClass:"auth-title"},[t._v("申请获取以下权限")]),n("v-uni-view",{staticClass:"auth-subtitle"},[t._v("获得你的公开信息（昵称、头像等）")]),n("v-uni-view",{staticClass:"login-btn"}),n("v-uni-view",{staticClass:"no-login-btn"},[n("v-uni-button",{staticClass:"btn-normal",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onNotLogin.apply(void 0,arguments)}}},[t._v("暂不登录")])],1),t.kmd_mask?n("v-uni-view",{staticStyle:{width:"100%",height:"100%",background:"gray",position:"fixed",top:"0",left:"0","z-index":"50",opacity:"0.6"}}):t._e(),t.kmd_phone?n("v-uni-view",{staticStyle:{"z-index":"99","border-radius":"10%",width:"80%",height:"9rem","background-color":"#FFFFFF",position:"fixed",left:"0",right:"0",margin:"0 auto",top:"7rem"}},[n("v-uni-view",{staticStyle:{height:"6rem","line-height":"6rem","text-align":"center","font-size":"16px"}},[t._v("微信授权")]),n("v-uni-view",[n("v-uni-button",{staticClass:"btn-normal",staticStyle:{width:"90%","margin-left":"5%","background-color":"#04be01","border-radius":"999rpx",color:"#FFFFFF"},attrs:{"open-type":"getPhoneNumber",withCredentials:"true"},on:{getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.getPhoneNumber.apply(void 0,arguments)}}},[t._v("一键授权")])],1)],1):t._e()],1)},o=[]},5955:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{background:"",listData:[],kmd_mask:!1,kmd_phone:!1}},onShow:function(){},onLoad:function(){},methods:{onNotLogin:function(){uni.reLaunch({url:"/pages/index/index"})},wxGetUserInfo:function(t){var e=this;if("getUserInfo:ok"!==t.detail.errMsg)return!1;uni.showLoading({title:"正在登录",mask:!0}),wx.login({success:function(t){wx.getSetting({success:function(n){n.authSetting["scope.userInfo"]&&wx.getUserInfo({success:function(n){e._post("user.user/login",{code:t.code,user_info:n.rawData,encrypted_data:encodeURIComponent(n.encryptedData),iv:encodeURIComponent(n.iv),signature:n.signature,referee_id:uni.getStorageSync("referee_id"),source:"wx"},(function(t){uni.setStorageSync("token",t.data.token),uni.setStorageSync("user_id",t.data.user_id),t.data.is_phone?(e.kmd_mask=!0,e.kmd_phone=!0):uni.navigateBack()}),!1,(function(){uni.hideLoading()}))}})}})}})},getPhoneNumber:function(t){var e=this;if("getPhoneNumber:ok"!==t.detail.errMsg)return e.kmd_mask=!1,e.kmd_phone=!1,uni.navigateBack(),!1;uni.showLoading({title:"正在处理",mask:!0}),e._post("user.user/phone",{encrypted_data:encodeURIComponent(t.detail.encryptedData),iv:encodeURIComponent(t.detail.iv),user_id:uni.getStorageSync("user_id")},(function(t){e.kmd_mask=!1,e.kmd_phone=!1,uni.navigateBack()}),!1,(function(){uni.hideLoading()}))}}};e.default=i},"9a57":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".login-container[data-v-5e2d3a12]{padding:%?30?%}.wechatapp[data-v-5e2d3a12]{padding:%?80?% 0 %?48?%;border-bottom:%?1?% solid #e3e3e3;margin-bottom:%?72?%;text-align:center}.wechatapp .header[data-v-5e2d3a12]{width:%?190?%;height:%?190?%;border:2px solid #fff;margin:%?0?% auto 0;border-radius:50%;overflow:hidden;box-shadow:1px 0 5px rgba(50,50,50,.3)}.auth-title[data-v-5e2d3a12]{color:#585858;font-size:%?34?%;margin-bottom:%?40?%}.auth-subtitle[data-v-5e2d3a12]{color:#888;margin-bottom:%?88?%;font-size:%?28?%}.login-btn[data-v-5e2d3a12]{padding:0 %?20?%}.login-btn uni-button[data-v-5e2d3a12]{height:%?88?%;line-height:%?88?%;background:#04be01;color:#fff;font-size:%?30?%;border-radius:%?999?%;text-align:center}.no-login-btn[data-v-5e2d3a12]{margin-top:%?20?%;padding:0 %?20?%}.no-login-btn uni-button[data-v-5e2d3a12]{height:%?88?%;line-height:%?88?%;background:#dfdfdf;color:#fff;font-size:%?30?%;border-radius:%?999?%;text-align:center}",""]),t.exports=e}}]);