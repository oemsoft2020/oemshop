(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plus-certify-apply-apply","components-upload-upload"],{"0b08":function(t,e,i){"use strict";i("4160"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{imageList:[]}},onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;uni.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(t){var e=this,i=0,a=t.length,n={token:uni.getStorageSync("token"),app_id:e.getAppId()};uni.showLoading({title:"图片上传中"}),t.forEach((function(t,s){uni.uploadFile({url:e.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:n,success:function(t){var i="object"===typeof t.data?t.data:JSON.parse(t.data);1===i.code&&e.imageList.push(i.data)},complete:function(){i++,a===i&&(uni.hideLoading(),e.$emit("getImgs",e.imageList))}})}))}}};e.default=a},1241:function(t,e,i){"use strict";i.r(e);var a=i("5652"),n=i("f724");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o,c=i("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"132d2670",null,!1,a["a"],o);e["default"]=l.exports},"4abc":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".abs[data-v-478e302c]{position:absolute}.staff-editInfo-common[data-v-478e302c]{width:92%;height:auto;padding:%?0?% 4%;background:#fff;margin-top:%?20?%;border:%?1?% solid #e5e5e5;border-left:transparent;border-right:transparent}.staff-editInfo-common .title[data-v-478e302c]{height:%?90?%;line-height:%?90?%;font-size:%?30?%;color:#2f2f2f}.staff-editInfo-common .imgs[data-v-478e302c]{padding-bottom:%?20?%}.staff-editInfo-common .imgs .imgs-icon[data-v-478e302c]{width:%?160?%;height:%?160?%;line-height:%?160?%;display:block;margin-bottom:%?20?%;margin-left:%?10?%;background:#f3f4f7}.staff-editInfo-common .imgs .imgs-icon i[data-v-478e302c]{font-size:%?80?%;color:#b4b4b4}.upload-staff-images[data-v-478e302c]{width:%?158?%;height:%?158?%;float:left;margin:%?0?% %?9?% %?20?% %?9?%}.imgs .upload-staff-images[data-v-478e302c]:nth-child(4n-3){margin-left:%?0?%}.imgs .upload-staff-images[data-v-478e302c]:nth-child(4n){margin-right:%?0?%}.upload-staff-images em[data-v-478e302c]{top:%?-16?%;right:%?-16?%;line-height:1;display:block;width:%?36?%;height:%?36?%;line-height:%?36?%;background:#898989;-webkit-transform:rotate(45deg);transform:rotate(45deg);vertical-align:middle;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.upload-staff-images em i[data-v-478e302c]{font-size:%?20?%;color:#fff}.upload-staff-images uni-image[data-v-478e302c]{width:100%;height:100%}",""]),t.exports=e},5652:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view")},s=[]},"8c7a":function(t,e,i){"use strict";i.r(e);var a=i("f264"),n=i("af47");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("ab5c");var o,c=i("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"478e302c",null,!1,a["a"],o);e["default"]=l.exports},a85e:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("1241")),s=a(i("e127")),o={components:{Upload:n.default},data:function(){return{loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:"",isUpload:!1,step:1,type_text:"",type_name:"",file_key:"",certificate_apply_id:0,form:{name:"",certificate_no:"",certify_type:"",front_idcard:"",back_idcard:"",business_license:"",images:[]},from_url:""}},onLoad:function(t){this.from_url=t.from_url?t.from_url:""},mounted:function(){this.getData()},methods:{getData:function(){var t=this;uni.showLoading({title:"加载中"}),t._get("plus.certification.apply/getDetail",{},(function(e){uni.hideLoading(),e.data.detail&&(t.form=e.data.detail,t.type=t.form.certify_type.value,t.step=2,t.type_text=10==t.type?"个人认证":"企业认证",t.type_name=10==t.type?"真实姓名":"主体名称")}))},tabType:function(t){this.type=t},next:function(){if(!this.type)return uni.showToast({title:"请选择认证类别",duration:1e3,icon:"none"}),!1;this.type_text=10==this.type?"个人认证":"企业认证",this.type_name=10==this.type?"真实姓名":"主体名称",this.step=2},formSubmit:function(t){var e=this,i=e.form;return i.certify_type=e.type,e.type?""==i.name?(uni.showToast({title:"请输入名称",duration:1e3,icon:"none"}),!1):""==i.certificate_no?(uni.showToast({title:"请输入证件编号",duration:1e3,icon:"none"}),!1):""==i.front_idcard&&10==e.type?(uni.showToast({title:"请上传身份证正面",duration:1e3,icon:"none"}),!1):""==i.front_idcard&&10==e.type?(uni.showToast({title:"请上传身份证反面",duration:1e3,icon:"none"}),!1):""==i.business_license&&20==e.type?(uni.showToast({title:"请上传营业执照",duration:1e3,icon:"none"}),!1):(uni.showLoading({title:"正在提交",mask:!0}),void e._post("plus.certification.apply/submit",i,(function(t){uni.hideLoading(),uni.showToast({title:t.msg,duration:3e3,complete:function(){var t="/pages/plus/certify/index";"supply"==e.from_url&&(t="/pages/supply/apply"),"user_apply"==e.from_url&&(t="/pages/user/grade/apply"),uni.navigateTo({url:t})}})}))):(uni.showToast({title:"请选择认证类别",duration:1e3,icon:"none"}),!1)},openUpload:function(t){this.file_key=t,this.isUpload=!0},getImgsFunc:function(e){var i=this;i.isUpload=!1,e&&"undefined"!=typeof e&&(t("log",e,i.form[i.file_key]," at pages/plus/certify/apply/apply.vue:283"),i.form[i.file_key]=e[0].file_path)},deleteFunc:function(t){this.form[t]=""},chooseWxImageShop:function(){var t=this,e=(t.form.images,t.form,{token:uni.getStorageSync("token"),app_id:t.getAppId()});uni.chooseImage({count:3,sizeType:["original","compressed"],success:function(i){var a=s.default.app_url+"/index.php?s=/api/file.upload/image";for(var n in i.tempFilePaths)uni.showLoading({title:"图片上传中"}),uni.uploadFile({url:a,filePath:i.tempFilePaths[n],name:"iFile",formData:e,success:function(e){var i=JSON.parse(e.data);t.form.images_str?t.form.images_str+=","+i.data.file_path:t.form.images_str=i.data.file_path,t.form.images_id?t.form.images_id+=","+i.data.file_id:t.form.images_id=i.data.file_id,t.form.images.push(i.data.file_path),uni.hideLoading()}})},fail:function(t){uni.hideLoading()}})},toDeleteImg:function(e){var i=this;i.form.images.splice(e,1),t("log",i.form.images," at pages/plus/certify/apply/apply.vue:342")}}};e.default=o}).call(this,i("0de9")["log"])},ab5c:function(t,e,i){"use strict";var a=i("bc67"),n=i.n(a);n.a},af47:function(t,e,i){"use strict";i.r(e);var a=i("a85e"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},bc67:function(t,e,i){var a=i("4abc");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1338480d",a,!0,{sourceMap:!1,shadowMode:!1})},f264:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"refund-apply pb100"},[i("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)},reset:function(e){arguments[0]=e=t.$handleEvent(e),t.formReset.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"bg-white p-0-30 f30"},[t.type_text?i("v-uni-view",{staticClass:"d-s-c p-20-0 border-b-e"},[i("v-uni-text",{staticClass:"key-name"},[t._v("认证类型")]),i("span",{staticClass:"ml20"},[t._v(t._s(t.type_text))])],1):i("v-uni-view",{staticClass:"d-s-c p-20-0 border-b-e"},[i("v-uni-text",{staticClass:"key-name"},[t._v("认证类型")]),i("v-uni-button",{class:10==t.type?"ml20 btn-red-border":"ml20",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabType(10)}}},[t._v("个人认证")]),i("v-uni-button",{class:20==t.type?"ml20 btn-red-border":"ml20",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabType(20)}}},[t._v("企业认证")])],1),2==t.step?i("v-uni-view",[i("v-uni-view",{staticClass:"d-s-c border-b-e"},[i("v-uni-text",{staticClass:"key-name"},[t._v(t._s(t.type_name))]),i("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"name",type:"text",placeholder:"请输入"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("v-uni-view",{staticClass:"d-s-c border-b-e"},[i("v-uni-text",{staticClass:"key-name"},[t._v("证件号码")]),i("v-uni-input",{staticClass:"ml20 flex-1 p-30-0",attrs:{name:"phone",type:"text",placeholder:"请输入"},model:{value:t.form.certificate_no,callback:function(e){t.$set(t.form,"certificate_no",e)},expression:"form.certificate_no"}})],1),10==t.type?i("v-uni-view",{staticClass:"bg-white border-b-e"},[i("v-uni-view",{staticClass:"group-hd"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"min-name"},[t._v("身份证人脸面")])],1)],1),i("v-uni-view",{staticClass:"upload-list d-s-c"},[t.form.front_idcard?i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFunc("front_idcard")}}},[i("v-uni-image",{attrs:{src:t.form.front_idcard,mode:"aspectFit"}})],1):t._e(),t.form.front_idcard?t._e():i("v-uni-view",{staticClass:"item d-c-c d-stretch"},[i("v-uni-view",{staticClass:"upload-btn d-c-c d-c flex-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUpload("front_idcard")}}},[i("v-uni-text",{staticClass:"icon iconfont icon-xiangji f34"}),i("v-uni-text",{staticClass:"gray9"},[t._v("上传身份证正面")])],1)],1)],1)],1):t._e(),10==t.type?i("v-uni-view",{staticClass:" bg-white border-b-e"},[i("v-uni-view",{staticClass:"group-hd"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"min-name"},[t._v("身份证国徽面")])],1)],1),i("v-uni-view",{staticClass:"upload-list d-s-c"},[t.form.back_idcard?i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFunc("back_idcard")}}},[i("v-uni-image",{attrs:{src:t.form.back_idcard,mode:"aspectFit"}})],1):t._e(),t.form.back_idcard?t._e():i("v-uni-view",{staticClass:"item d-c-c d-stretch"},[i("v-uni-view",{staticClass:"upload-btn d-c-c d-c flex-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUpload("back_idcard")}}},[i("v-uni-text",{staticClass:"icon iconfont icon-xiangji f34"}),i("v-uni-text",{staticClass:"gray9"},[t._v("上传身份证反面")])],1)],1)],1)],1):t._e(),20==t.type?i("v-uni-view",{staticClass:" bg-white border-b-e"},[i("v-uni-view",{staticClass:"group-hd"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"min-name"},[t._v("营业执照照片")])],1)],1),i("v-uni-view",{staticClass:"upload-list d-s-c"},[t.form.business_license?i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFunc("business_license")}}},[i("v-uni-image",{attrs:{src:t.form.business_license,mode:"aspectFit"}})],1):t._e(),t.form.business_license?t._e():i("v-uni-view",{staticClass:"item d-c-c d-stretch"},[i("v-uni-view",{staticClass:"upload-btn d-c-c d-c flex-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUpload("business_license")}}},[i("v-uni-text",{staticClass:"icon iconfont icon-xiangji f34"}),i("v-uni-text",{staticClass:"gray9"},[t._v("上传营业执照")])],1)],1)],1)],1):t._e(),i("v-uni-view",{staticClass:" bg-white border-b-e"},[i("v-uni-view",{staticClass:"group-hd"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"min-name"},[t._v("补充材料")])],1)],1),i("v-uni-view",{staticClass:"upload-list d-s-c"},[t._l(t.form.images,(function(e,a){return i("v-uni-view",{key:a,staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDeleteImg(a)}},model:{value:t.form.images,callback:function(e){t.$set(t.form,"images",e)},expression:"form.images"}},[i("v-uni-image",{attrs:{src:e,mode:"aspectFit"}})],1)})),t.form.images.length<3?i("v-uni-view",{staticClass:"item d-c-c d-stretch"},[i("v-uni-view",{staticClass:"upload-btn d-c-c d-c flex-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseWxImageShop()}}},[i("v-uni-text",{staticClass:"icon iconfont icon-xiangji f34"})],1)],1):t._e()],2)],1)],1):t._e()],1),1==t.step?i("v-uni-view",{staticClass:"p30",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.next()}}},[i("v-uni-button",{staticClass:"btn-red f30 mt30",attrs:{type:"default"}},[t._v("下一步")])],1):t._e(),2==t.step?i("v-uni-view",{staticClass:"p30"},[i("v-uni-button",{staticClass:"btn-red f30 mt30",attrs:{"form-type":"submit",type:"default"}},[t._v("下一步")])],1):t._e()],1),t.isUpload?i("Upload",{on:{getImgs:function(e){arguments[0]=e=t.$handleEvent(e),t.getImgsFunc.apply(void 0,arguments)}}}):t._e()],1)},s=[]},f724:function(t,e,i){"use strict";i.r(e);var a=i("0b08"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);