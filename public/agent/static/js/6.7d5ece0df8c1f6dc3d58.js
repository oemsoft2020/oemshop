webpackJsonp([6],{"25Sm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("vLgD"),i={shopList:function(e,t){return o.a._post("/agent/shop/index",e,t)},addShop:function(e,t){return o.a._post("/agent/shop/add",e,t)},editShop:function(e,t){return o.a._post("/agent/shop/edit",e,t)},updateStatus:function(e,t){return o.a._post("/agent/shop/updateStatus",e,t)},storeEnter:function(e,t){return o.a._post("/agent/shop/enter",e,t)},deleteShop:function(e,t){return o.a._post("/agent/shop/delete",e,t)},roleInfo:function(e,t){return o.a._post("/agent/shop/roleInfo",e,t)},roleInfoByAdd:function(e,t){return o.a._post("/agent/shop/roleInfoByAdd",e,t)},isTestChange:function(e,t){return o.a._post("/agent/shop/updateIsTestStatus",e,t)}},n={fileCategory:function(e,t){return o.a._post("/shop/file.file/category",e,t)},fileList:function(e,t){return o.a._post("/shop/file.file/lists",e,t)},deleteFiles:function(e,t){return o.a._post("/shop/file.file/deleteFiles",e,t)},addCategory:function(e,t){return o.a._post("/shop/file.file/addGroup",e,t)},editCategory:function(e,t){return o.a._post("/shop/file.file/editGroup",e,t)},deleteCategory:function(e,t){return o.a._post("/shop/file.file/deleteGroup",e,t)},uploadFile:function(e,t){return o.a._upload("/shop/file.upload/image",e,t)},moveFile:function(e,t){return o.a._upload("/shop/file.upload/moveFiles",e,t)}},s={data:function(){return{dialogVisible:!0,form:{categoryname:""},categoryName:""}},props:["category"],created:function(){console.log(this.category),null!=this.category&&(this.form.categoryname=this.category.group_name,this.form.group_id=this.category.group_id)},methods:{addCategory:function(e){var t=this;n.addCategory({group_name:e}).then(function(e){t.$message({message:"添加成功",type:"success"}),t.handleClose({status:"success"})}).catch(function(e){t.$message.error("添加失败")})},editCategory:function(e){var t=this,a={group_name:e.categoryname,group_id:e.group_id};console.log(a),n.editCategory(a).then(function(e){t.$message({message:"修改成功",type:"success"}),t.handleClose({status:"success"})}).catch(function(e){t.$message.error("修改失败")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.category&&null!=t.category.group_id?t.editCategory(t.form):t.addCategory(t.form.categoryname)})},handleClose:function(e){this.dialogVisible=!1,this.$emit("closeCategory",e)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加分类",visible:e.dialogVisible,width:"30%","before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{size:"small",model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"categoryname",rules:[{required:!0,message:"名字不能为空"}]}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.form.categoryname,callback:function(t){e.$set(e.form,"categoryname",e._n(t))},expression:"form.categoryname"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var r={components:{AddCategory:a("VU/8")(s,l,!1,function(e){a("fZZw")},null,null).exports},data:function(){return{dialogWidth:"910px",activeType:null,typeList:[],imageUrl:null,dialogVisible:!0,fileList:[],addLoading:!1,this_config:{total:1},record:0,loading:!0,tableData:[],pageSize:36,totalDataNumber:0,curPage:1,isShowCategory:!1,category:null,fileIds:[]}},props:["config","type"],created:function(){if("[object object]"===Object.prototype.toString.call(this.config).toLowerCase())for(var e in this.config)this.this_config[e]=this.config[e];this.getFileCategory(),this.getData()},methods:{getFileCategory:function(){var e=this;n.fileCategory({},!0).then(function(t){e.typeList=[{group_id:null,group_name:"全部"}].concat(t.data.group_list)}).catch(function(t){e.loading=!1})},addCategory:function(){this.isShowCategory=!0},editCategoryFunc:function(e){this.isShowCategory=!0,this.category=e},closeCategoryFunc:function(e){null!=e&&this.getFileCategory(),this.isShowCategory=!1},deleteCategoryFunc:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCategory(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteCategory:function(e){var t=this;n.deleteCategory({group_id:e}).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getFileCategory()}).catch(function(e){t.$message.error("删除失败")})},selectTypeFunc:function(e){this.activeType=e,this.curPage=1,this.getData()},handleCurrentChange:function(e){this.curPage=e,this.getData()},handleSizeChange:function(e){this.curPage=1,this.pageSize=e,this.getData()},getData:function(){var e=this,t={type:e.type,page:e.curPage,pageSize:e.pageSize,group_id:e.activeType};n.fileList(t,!0).then(function(t){e.loading=!1,e.fileList=t.data.file_list,e.totalDataNumber=e.fileList.total}).catch(function(t){e.loading=!1})},moveTypeFunc:function(e){var t=this,a=[];t.fileList.data.forEach(function(e){e.selected&&a.push(e.file_id)}),0!=a.length?t.$confirm("确定移动选中的文件吗？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.moveFile({group_id:e,fileIds:a},!0).then(function(e){t.$message({message:"移动成功",type:"success"}),t.getFileCategory(),t.getData()}).catch(function(e){})}).catch(function(){}):t.$message({message:"请选择文件",type:"warning"})},fileChange:function(e){console.log(e)},onBeforeUploadImage:function(e){var t="image/jpeg"===e.type||"image/jpg",a=e.size/1024/1024<200;return t||this.$message.error("上传文件只能是图片格式!"),a||this.$message.error("上传文件大小不能超过 2MB!"),t&&a},UploadImage:function(e){var t=this,a=this.$loading({lock:!0,text:"图片上传中,请等待",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o=new FormData;o.append("iFile",e.file),o.append("group_id",t.activeType),n.uploadFile(o).then(function(o){a.close(),t.getData(),e.onSuccess()}).catch(function(o){a.close(),t.$message({message:"本次上传图片失败",type:"warning"}),e.onError()})},selectFileFunc:function(e,t){e.selected?(e.selected=!1,this.record--):(e.selected=!0,this.record++),this.$set(this.fileList.data,t,e)},deleteFileFunc:function(e){var t=this;t.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.$loading({lock:!0,text:"正在删除",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o=[];if(e)o.push(e.file_id);else for(var i=0;i<t.fileList.data.length;i++){var s=t.fileList.data[i];s.selected&&o.push(s.file_id)}n.deleteFiles({fileIds:o},!0).then(function(e){a.close(),t.$message({message:"删除成功",type:"success"}),t.getData()}).catch(function(e){a.close()})}).catch(function(){loading.close(),t.$message({message:"删除失败",type:"warning"})})},confirmFunc:function(){for(var e=[],t=0,a=0;a<this.fileList.data.length;a++){var o=this.fileList.data[a];if(o.selected){var i={file_id:o.file_id,file_path:o.file_path};e.push(i),t++}if(t>this.this_config.total)break}this.$emit("returnImgs",e)},cancelFunc:function(){this.$emit("returnImgs",null)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-wrap"},[a("el-dialog",{attrs:{title:"文件管理",visible:e.dialogVisible,"close-on-click-modal":!1,"custom-class":"upload-dialog","close-on-press-escape":!1,width:e.dialogWidth,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},close:e.cancelFunc}},[a("div",{staticClass:"upload-wrap-inline mb16 clearfix"},[a("div",{staticClass:"leval-item"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addCategory}},[e._v("添加分类")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click",value:!0}},[a("ul",{staticClass:"move-type"},e._l(e.typeList,function(t,o){return a("li",{key:o,on:{click:function(a){return e.moveTypeFunc(t.group_id)}}},[e._v("\n               "+e._s(t.group_name)+"\n             ")])}),0),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-caret-bottom"},slot:"reference"},[e._v("移动至")])],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFileFunc(!1)}}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"leval-item upload-btn"},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{multiple:"",action:"string","before-upload":e.onBeforeUploadImage,"http-request":e.UploadImage,"show-file-list":!1,"on-change":e.fileChange}},[a("el-button",{attrs:{size:"small",icon:"el-icon-upload",type:"primary"}},[e._v("点击上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"fileContainer"},[a("div",{staticClass:"file-type"},[a("ul",e._l(e.typeList,function(t,o){return a("li",{key:o,class:e.activeType==t.group_id?"item active":"item",on:{click:function(a){return e.selectTypeFunc(t.group_id)}}},[e._v("\n            "+e._s(t.group_name)+"\n            "),null!=t.group_id?a("div",{staticClass:"operation",on:{click:function(e){e.stopPropagation()}}},[a("p",{on:{click:function(a){return e.editCategoryFunc(t)}}},[a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("p",{on:{click:function(a){return e.deleteCategoryFunc(t.group_id)}}},[a("i",{staticClass:"el-icon-delete"})])]):e._e()])}),0)]),e._v(" "),a("div",{staticClass:"file-content"},[a("ul",{staticClass:"fileContainerUI clearfix"},e._l(e.fileList.data,function(t,o){return a("li",{key:o,staticClass:"file",on:{click:function(a){return e.selectFileFunc(t,o)}}},[1==t.selected?a("div",{staticClass:"selectedIcon"},[a("i",{staticClass:"el-icon-check"})]):e._e(),e._v(" "),"image"==t.file_type?a("div",[a("img",{style:"background-image:url("+t.file_path+")",attrs:{scr:t.file_path,alt:""}})]):"video"==t.file_type?a("div",[a("video",{attrs:{src:t.file_path}})]):e._e(),e._v(" "),a("p",{staticClass:"desc"},[e._v(e._s(t.real_name))]),e._v(" "),a("div",{staticClass:"bottom-shade",on:{click:function(e){e.stopPropagation()}}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.deleteFileFunc(t)}}},[a("i",{staticClass:"el-icon-delete"})])])])}),0)])]),e._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":e.curPage,"page-sizes":[12,24,36,42,48],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalDataNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelFunc}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmFunc}},[e._v("确 定")])],1)]),e._v(" "),e.isShowCategory?a("AddCategory",{attrs:{category:e.category},on:{closeCategory:e.closeCategoryFunc}}):e._e()],1)},staticRenderFns:[]};var d={components:{Upload:a("VU/8")(r,c,!1,function(e){a("nYJJ")},null,null).exports},data:function(){var e=this;return{form:{access_id:[]},data:[],formLabelWidth:"120px",dialogVisible:!1,loading:!0,defaultProps:{children:"children",label:"name"},select_menu:[],rules:{app_name:[{validator:function(t,a,o){return a?e.$filter.isAllSpace(a)?o(new Error("不能全是空格")):void o():o(new Error("请输入商城名称"))},required:!0,trigger:"blur"}],user_name:[{validator:function(t,a,o){return e.$filter.replaceSpace(a)?e.$filter.hasSpace(a)?o(new Error("不能包含空格")):void o():o(new Error("商家账户名"))},required:!0,trigger:"blur"}],password:[{validator:function(t,a,o){if(a){if(e.$filter.hasSpace(a))return o(new Error("不能包含空格"));if(a.length<6)return o(new Error("长度不能小于6位"));o()}else o()},trigger:"change"}],password_confirm:[{validator:function(t,a,o){e.form.password&&a!==e.form.password?o(new Error("确认密码不一致")):o()},trigger:"blur"}]},isupload:!1}},props:["open_edit","curModel"],created:function(){this.dialogVisible=this.open_edit,this.form=this.curModel,this.getData()},methods:{addClick:function(){var e=this,t=this.form;e.$refs.form.validate(function(a){a&&(e.loading=!0,t.is_system_agent=t.is_system_agent?1:0,i.editShop(t,!0).then(function(t){e.loading=!1,e.$message({message:"恭喜你，修改成功",type:"success"}),e.dialogFormVisible(!0)}).catch(function(t){e.loading=!1}))})},handleCheckChange:function(e,t){this.form.access_id=t.checkedKeys.concat(t.halfCheckedKeys)},dialogFormVisible:function(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})},getData:function(){var e=this,t={};t.app_id=e.form.app_id,i.roleInfo(t,!0).then(function(t){e.clearData(t.data.menu,t.data.select_menu);e.select_menu=t.data.select_menu,e.data=t.data.menu,e.loading=!1}).catch(function(t){e.loading=!1})},clearData:function(e,t){for(var a=0,o=e.length,i=0;i<o;i++){var n=e[i];if(null!=n.children)if(!this.clearData(n.children,t)){var s=t.indexOf(n.access_id);s>=0&&t.splice(s,1)}-1!=t.indexOf(n.access_id)&&a++}return!(a<o)},returnImgsFunc:function(e){console.log(e),null!=e&&e.length>0&&(this.form.file_url=e[0].file_path,this.form.system_agent_qrcode=e[0].file_id),this.isupload=!1},onEditorSelectImage:function(){this.isupload=!0}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑小程序商城",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogFormVisible}},[a("el-form",{ref:"form",attrs:{size:"small",model:e.form,rules:e.rules}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}},[a("input",{attrs:{type:"password"}})]),e._v(" "),a("el-form-item",{attrs:{label:"商城名称","label-width":e.formLabelWidth,prop:"app_name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商城名称"},model:{value:e.form.app_name,callback:function(t){e.$set(e.form,"app_name",t)},expression:"form.app_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家账户名","label-width":e.formLabelWidth,prop:"user_name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商家账户名"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}}),e._v(" "),a("p",{staticClass:"gray"},[e._v("注：商家后台用户名")])],1),e._v(" "),a("el-form-item",{attrs:{label:"商家账户密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),a("p",{staticClass:"gray"},[e._v("注：商家后台用户密码")])],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"password_confirm"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入确认密码"},model:{value:e.form.password_confirm,callback:function(t){e.$set(e.form,"password_confirm",t)},expression:"form.password_confirm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限列表：","label-width":e.formLabelWidth},model:{value:e.form.access_id,callback:function(t){e.$set(e.form,"access_id",t)},expression:"form.access_id"}},[a("el-tree",{attrs:{data:e.data,"show-checkbox":"","node-key":"access_id","default-expand-all":!1,"default-checked-keys":e.select_menu,props:e.defaultProps},on:{check:e.handleCheckChange}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogFormVisible}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.addClick()}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("8xoL")},null,null).exports,f={data:function(){var e=this;return{form:{access_id:[]},data:[],formLabelWidth:"120px",dialogVisible:!1,loading:!1,defaultProps:{children:"children",label:"name"},rules:{app_name:[{validator:function(t,a,o){return a?e.$filter.isAllSpace(a)?o(new Error("不能全是空格")):void o():o(new Error("请输入商城名称"))},required:!0,trigger:"blur"}],user_name:[{validator:function(t,a,o){return e.$filter.replaceSpace(a)?e.$filter.hasSpace(a)?o(new Error("不能包含空格")):void o():o(new Error("商家账户名"))},required:!0,trigger:"blur"}],password:[{validator:function(t,a,o){if(a){if(e.$filter.hasSpace(a))return o(new Error("不能包含空格"));if(a.length<6)return o(new Error("长度不能小于6位"));o()}else o(new Error("请输入密码"))},required:!0,trigger:"change"}],password_confirm:[{validator:function(t,a,o){a?a!==e.form.password?o(new Error("确认密码不一致")):o():o(new Error("请填写确认密码"))},required:!0,trigger:"blur"}]}}},props:["open_add"],created:function(){this.dialogVisible=this.open_add,this.getData()},methods:{addClick:function(){var e=this,t=this.form;e.$refs.form.validate(function(a){a&&(e.loading=!0,i.addShop(t,!0).then(function(t){e.loading=!1,1==t.code&&(e.$message({message:"恭喜你，添加成功",type:"success"}),e.dialogFormVisible(!0))}).catch(function(t){e.loading=!1}))})},handleCheckChange:function(e,t){this.form.access_id=t.checkedKeys.concat(t.halfCheckedKeys)},getData:function(){var e=this;i.roleInfoByAdd([]).then(function(t){e.data=t.data.menu,e.loading=!1}).catch(function(t){e.loading=!1})},dialogFormVisible:function(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增小程序商城",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogFormVisible}},[a("el-form",{ref:"form",attrs:{size:"small",model:e.form,rules:e.rules}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}},[a("input",{attrs:{type:"password"}})]),e._v(" "),a("el-form-item",{attrs:{label:"商城名称","label-width":e.formLabelWidth,prop:"app_name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商城名称"},model:{value:e.form.app_name,callback:function(t){e.$set(e.form,"app_name",t)},expression:"form.app_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家账户名","label-width":e.formLabelWidth,prop:"user_name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商家账户名"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}}),e._v(" "),a("p",{staticClass:"gray"},[e._v("注：商家后台用户名")])],1),e._v(" "),a("el-form-item",{attrs:{label:"商家账户密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),a("p",{staticClass:"gray"},[e._v("注：商家后台用户密码")])],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"password_confirm"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入确认密码"},model:{value:e.form.password_confirm,callback:function(t){e.$set(e.form,"password_confirm",t)},expression:"form.password_confirm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限列表：","label-width":e.formLabelWidth},model:{value:e.form.access_id,callback:function(t){e.$set(e.form,"access_id",t)},expression:"form.access_id"}},[a("el-tree",{attrs:{data:e.data,"show-checkbox":"","node-key":"access_id","default-expand-all":!1,"default-checked-keys":[],props:e.defaultProps},on:{check:e.handleCheckChange}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogFormVisible}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.addClick()}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(f,g,!1,function(e){a("jj2S")},null,null).exports,h=a("aFVK"),_={components:{Edit:p,Add:m},data:function(){return{loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,open_add:!1,open_edit:!1,curModel:{},keyword:""}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.loading=!0,this.curPage=e,this.getData()},handleSizeChange:function(e){this.curPage=1,this.pageSize=e,this.getData()},getData:function(){var e=this;e.loading=!0,i.shopList({page:e.curPage,list_rows:e.pageSize,keyword:e.keyword},!0).then(function(t){e.loading=!1,e.tableData=t.data.list.data,e.totalDataNumber=t.data.list.total,e.tableData.forEach(function(e){e.status=1===e.status,e.is_system_test=1===e.is_system_test}),console.log(e.tableData)}).catch(function(e){})},addClick:function(){this.open_add=!0},editClick:function(e){this.open_edit=!0,this.curModel=Object(h.a)(e)},closeDialogFunc:function(e,t){"add"==t&&(this.open_add=e.openDialog,"success"==e.type&&this.getData()),"edit"==t&&(this.open_edit=e.openDialog,"success"==e.type&&this.getData())},statusChange:function(e,t){var a=this;a.loading=!0,i.updateStatus({app_id:t.app_id},!0).then(function(o){a.loading=!1,t.status=e}).catch(function(o){a.loading=!1,t.status=!e})},isTestChange:function(e,t){var a=this;a.loading=!0,i.isTestChange({app_id:t.app_id},!0).then(function(o){a.loading=!1,t.is_system_text=e}).catch(function(o){a.loading=!1,t.is_system_text=!e})},deleteClick:function(e){var t=this;t.$confirm("删除后不可恢复，确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,i.deleteShop({app_id:e.app_id},!0).then(function(e){t.loading=!1,1==e.code&&(t.$message({message:e.msg,type:"success"}),t.getData())}).catch(function(e){t.loading=!1})}).catch(function(){})},storeEnter:function(e){i.storeEnter({app_id:e},!0).then(function(e){}).catch(function(e){})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{loading:e.loading}},[a("div",{staticClass:"common-level-rail"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addClick}},[e._v("添加系统")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("搜索")]),e._v(" "),a("el-input",{staticStyle:{width:"200px",float:"right"},attrs:{size:"small",placeholder:"请输入商城名称",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("div",{staticClass:"product-content"},[a("div",{staticClass:"table-wrap"},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,"row-key":"app_id",border:"","default-expand-all":""}},[a("el-table-column",{attrs:{prop:"app_id",label:"系统ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"app_name",label:"系统名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"超管账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.statusChange(a,t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},[e._v("启用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"is_system_test",label:"是否为测试版"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){return e.isTestChange(a,t.row)}},model:{value:t.row.is_system_test,callback:function(a){e.$set(t.row,"is_system_test",a)},expression:"scope.row.is_system_test"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"添加时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:"/index.php/agent/shop/enter/app_id/"+t.row.app_id,target:"_blank",type:"text",size:"small"}},[e._v("进入商城")]),e._v(" "),a("el-link",{staticClass:"ml10",attrs:{type:"text",size:"small"},on:{click:function(a){return e.editClick(t.row)}}},[e._v("编辑")])]}}])})],1)],1)])]),e._v(" "),e.open_add?a("Add",{attrs:{open_add:e.open_add},on:{closeDialog:function(t){return e.closeDialogFunc(t,"add")}}}):e._e(),e._v(" "),e.open_edit?a("Edit",{attrs:{open_edit:e.open_edit,curModel:e.curModel},on:{closeDialog:function(t){return e.closeDialogFunc(t,"edit")}}}):e._e(),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.curPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalDataNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var y=a("VU/8")(_,v,!1,function(e){a("YcIn")},null,null);t.default=y.exports},"8xoL":function(e,t){},YcIn:function(e,t){},fZZw:function(e,t){},jj2S:function(e,t){},nYJJ:function(e,t){}});
//# sourceMappingURL=6.7d5ece0df8c1f6dc3d58.js.map